/*
* contra.js
* Ed Fuhrken
* https://github.com/edfuh/contra
* License MIT
*/
(function(o,B){var l=[],h,a=[38,38,40,40,37,39,37,39,66,65],g=0,n=!!("ontouchstart" in o),p="addEventListener",m=false,k,i,C,A,E,y,v;function q(){while(h=l.shift()){h();}}function e(w){var d=w.which||w.keyCode;if(d===a[g]){g++;if(g>=a.length){q();D();}}else{g=0;D();}}function s(w,d){!!B[p]?B[p](w,d,0):B.attachEvent("on"+w,d);}function x(d){d.stopPropagation();d.preventDefault();}function u(d,w){while(d=d.parentNode){if(d===w){return true;}}return false;}function r(d){return B.createElement(d);}function c(w){if(w.touches.length){var d=w.touches[w.touches.length-1];k=0;i=0;C=d.pageX;A=d.pageY;}}function f(w){if(w.touches.length){var d=w.touches[w.touches.length-1];k=d.pageX;i=d.pageY;}}function b(G){if(m){var d=G.target===y||u(G.target,y)?y:G.target===v||u(G.target,v)?v:false;if(d){j.call(d,G);}else{e({which:0});}}else{var H=Math,L=H.abs,F=k-C,J=i-A,K=L(F),w=L(J),I=null;if(H.max(K,w)===K){if(F>0){I=39;}else{I=37;}}else{if(J>0){I=40;}else{I=38;}}e({which:I});if(g===a.length-2){t();}}}function j(F){x(F);i=k=C=A=0;var w=this.id.split("-")[1],d;if(w==="a"){d=65;}else{if(w==="b"){d=66;}}e({which:d});}function z(){E.className="contra-hidden";}function t(){m=true;E=r("div");y=r("button");v=r("button");E.id="contracode-controller";y.id="contracode-a";v.id="contracode-b";y.innerHTML="A";v.innerHTML="B";E.style.cssText=["position:absolute","top:0","left:0","right:0","bottom:0"].join(";");E.className="contra-visible";E.appendChild(v);E.appendChild(y);B.body.appendChild(E);}function D(){m=false;n&&z();}s("keyup",e);if(n){s("touchstart",c);s("touchmove",f);s("touchend",b);}o.contra=function(d){l.push(d);};})(this,document);